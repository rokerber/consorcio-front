<div class="containerSimulacao mat-elevation-z8">
  <h1 class="full-width">Simulação Consórcio</h1>
  <img class="full-width" src="assets/img/grafico.jpg" alt="image">

  <form class="form">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Cota</mat-label>
      <input [(ngModel)]="parametrosrequest.cota" name="cota" [formControl]="cota" required matInput
        placeholder="Ex. número de cotas">
    </mat-form-field>
  </form>

  <form id="myForm" class="form">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Lista de Mês Contemplação</mat-label>
      <input name="mesContemplacaoList" id="mesContemplacaoList" [(ngModel)]="parametrosrequest.mesContemplacaoList" name="mesContemplacaoList" [formControl]="mesContemplacaoList" required matInput
        placeholder="Ex. meses contemplação, Ex1: 10,50,70 ( para 3 cotas ) , Ex2: 120,200 ( para 2 cotas)">
    </mat-form-field>
  </form>

  <div class="modalidade">
    <mat-form-field appearance="outline">
      <mat-label>Selecione uma modalidade</mat-label>
      <mat-select [(ngModel)]="parametrosrequest.modalidade" name="modalidade" [formControl]="modalidade" required>
        <mat-option value="0">MEIA</mat-option>
        <mat-option value="1">CHEIA</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <form class="form">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Prazo</mat-label>
      <input [(ngModel)]="parametrosrequest.prazo" name="prazo" [formControl]="prazo" required matInput
        placeholder="Ex. prazo em meses">
    </mat-form-field>
  </form>

  <form class="form">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Valor Crédito</mat-label>
      <input [(ngModel)]="parametrosrequest.valorCredito" name="valorCredito" [formControl]="valorCredito" required
        matInput placeholder="Ex. valor credito da carta">
    </mat-form-field>
  </form>

  <form class="form">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Incc</mat-label>
      <input [(ngModel)]="parametrosrequest.incc" name="incc" [formControl]="incc" required matInput
        placeholder="Ex. taxa INCC em %">
    </mat-form-field>
  </form>

  <form class="form">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Lance</mat-label>
      <input [(ngModel)]="parametrosrequest.lance" name="lance" [formControl]="lance" matInput
        placeholder="Ex. lance de compra da carta em %">
    </mat-form-field>
  </form>

  <form class="form">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Taxa Administrativa</mat-label>
      <input [(ngModel)]="parametrosrequest.taxaAdm" name="taxaAdm" [formControl]="taxaAdm" required matInput
        placeholder="Ex. Taxa Administrativa da empresa em %">
    </mat-form-field>
  </form>

  <form class="form">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Mês Atual</mat-label>
      <input [(ngModel)]="parametrosrequest.mesAtual" name="mesAtual" [formControl]="mesAtual" required matInput
        placeholder="Ex. Mes usado para simulacao de crédito, janeiro = 1 , fevereiro = 2, etc">
    </mat-form-field>
  </form>

  <button (click)="calcularSimulacao()" [disabled]="!validaCampos()" class="full-width mat-elevation-z4"
    mat-raised-button color="primary">Calcular Simulação</button>


</div>


  <ng-container *ngIf="visibleTabelaPrincipal">
    <div class="containerSimulacao mat-elevation-z8">

<mat-form-field class="full-width" appearance="outline">
  <mat-label>Crédito : {{somaSimulacao.somaCreditoAtualizado}}</mat-label>
  <input [disabled]="true" matInput>
</mat-form-field>

<mat-form-field class="full-width" appearance="outline">
  <mat-label>Investimento Inicial : {{somaSimulacao.somaInvestimentoMensalCorrigido}}</mat-label>
  <input [disabled]="true" matInput>
</mat-form-field>

<mat-form-field class="full-width" appearance="outline">
  <mat-label>Investimento Pós Contemplação : {{somaSimulacao.somaInvestimentoPosContemplacao}}</mat-label>
  <input [disabled]="true" matInput>
</mat-form-field>

<mat-form-field class="full-width" appearance="outline">
  <mat-label>Valor Investido : {{somaSimulacao.somaValorInvestidoCorrigido}}</mat-label>
  <input [disabled]="true" matInput>
</mat-form-field>
</div>
</ng-container>


<div class="containerTabelaPrincipal">

<ng-container *ngIf="visibleTabelaPrincipal">

    <h1>Resultado Simulação Tabela Principal</h1>

    <div class="mat-elevation-z8">
      <table class="tabelaprincipal" mat-table [dataSource]="dataSourceTabelaPrincipal">

        <ng-container matColumnDef="cota">
          <th mat-header-cell *matHeaderCellDef> Cota </th>
          <td mat-cell *matCellDef="let element"> {{element.cota}} </td>
        </ng-container>

        <ng-container matColumnDef="mesContemplacao">
          <th mat-header-cell *matHeaderCellDef>Mes&NonBreakingSpace;Contemplação</th>
          <td mat-cell *matCellDef="let element"> {{element.mesContemplacao}} </td>
        </ng-container>

        <ng-container matColumnDef="formaContemplacao">
          <th mat-header-cell *matHeaderCellDef> Forma&NonBreakingSpace;Contemplação </th>
          <td mat-cell *matCellDef="let element"> {{element.formaContemplacao}} </td>
        </ng-container>

        <ng-container matColumnDef="creditoAtualizado">
          <th mat-header-cell *matHeaderCellDef> Credito Atualizado </th>
          <td mat-cell *matCellDef="let element"> {{element.creditoAtualizado}} </td>
        </ng-container>

        <ng-container matColumnDef="investimentoMensalCorrigido">
          <th mat-header-cell *matHeaderCellDef> Investimento Mensal Corrigido </th>
          <td mat-cell *matCellDef="let element"> {{element.investimentoMensalCorrigido}} </td>
        </ng-container>

        <ng-container matColumnDef="valorInvestidoCorrigido">
          <th mat-header-cell *matHeaderCellDef> Valor Investido Corrigido </th>
          <td mat-cell *matCellDef="let element"> {{element.valorInvestidoCorrigido}} </td>
        </ng-container>

        <ng-container matColumnDef="parcelaPosContemplacao">
          <th mat-header-cell *matHeaderCellDef> Parcela Pos&NonBreakingSpace;Contemplação </th>
          <td mat-cell *matCellDef="let element"> {{element.parcelaPosContemplacao}} </td>
        </ng-container>

        <ng-container matColumnDef="valorVenda">
          <th mat-header-cell *matHeaderCellDef> Valor Venda </th>
          <td mat-cell *matCellDef="let element"> {{element.valorVenda}} </td>
        </ng-container>

        <ng-container matColumnDef="ir">
          <th mat-header-cell *matHeaderCellDef> Imposto Renda </th>
          <td mat-cell *matCellDef="let element"> {{element.ir}} </td>
        </ng-container>

        <ng-container matColumnDef="lucroLiquido">
          <th mat-header-cell *matHeaderCellDef> Lucro Liquido </th>
          <td mat-cell *matCellDef="let element"> {{element.lucroLiquido}} </td>
        </ng-container>

        <ng-container matColumnDef="retornSobCapitalInvest">
          <th mat-header-cell *matHeaderCellDef> Retorno Sob Capital Investido </th>
          <td mat-cell *matCellDef="let element"> {{element.retornSobCapitalInvest}} </td>
        </ng-container>

        <ng-container matColumnDef="estrategia">
          <th mat-header-cell *matHeaderCellDef> Estrategia </th>
          <td mat-cell *matCellDef="let element"> {{element.estrategia}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsTabelaPrincipal"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsTabelaPrincipal;"></tr>
      </table>

      <!-- <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                             showFirstLastButtons
                             aria-label="Select page of periodic elements">
              </mat-paginator> -->
    </div>
 </ng-container>
</div>

<!-- <button (click)="scroll2(target)">Click to scroll</button>
<div #target class="containerTabelaAnual">Your target</div> -->


<div class="buttons">
  <button class="tabelas tabelaAnualButton" (click)="onclickTabelaAnual()" mat-raised-button color="primary">
    {{showTabelaAnual?"Mostrar Tabela Simulação Anual":"Esconder Tabela Simulação Anual"}}
  </button>

  <button class="tabelas tabelaMensalButton" (click)="onclickTabelaMensal()" mat-raised-button color="primary">
    {{showTabelaMensal?"Mostrar Tabela Simulação Mensal":"Esconder Tabela Simulação Mensal"}}
  </button>
</div>

<div class="containerTabelaAnual">

  <ng-container *ngIf="visibleTabelaAnual">

    <h1>Resultado Simulação Anual</h1>

    <div class="mat-elevation-z8">

      <table class="tabelaAnual" mat-table [dataSource]="dataSourceTabelaAnual">

        <ng-container matColumnDef="ano">
          <th mat-header-cell *matHeaderCellDef> Ano </th>
          <td mat-cell *matCellDef="let element"> {{element.ano}} </td>
        </ng-container>

        <ng-container matColumnDef="creditoAtualizadoAnual">
          <th mat-header-cell *matHeaderCellDef> Crédito Atualizado Anual </th>
          <td mat-cell *matCellDef="let element"> {{element.creditoAtualizadoAnual}} </td>
        </ng-container>

        <ng-container matColumnDef="investimentoAnualCorrigido">
          <th mat-header-cell *matHeaderCellDef> Investimento Anual Corrigido </th>
          <td mat-cell *matCellDef="let element"> {{element.investimentoAnualCorrigido}} </td>
        </ng-container>

        <ng-container matColumnDef="saldoDevedor">
          <th mat-header-cell *matHeaderCellDef> Saldo Devedor </th>
          <td mat-cell *matCellDef="let element"> {{element.saldoDevedor}} </td>
        </ng-container>

        <ng-container matColumnDef="valorDaVenda">
          <th mat-header-cell *matHeaderCellDef> Valor da Venda </th>
          <td mat-cell *matCellDef="let element"> {{element.valorDaVenda}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsTabelaAnual"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsTabelaAnual;"></tr>
      </table>

    </div>

  </ng-container>

  </div>


<div class="containerTabelaMensal">

 <ng-container *ngIf="visibleTabelaMensal"> 

    <h1>Resultado Simulação Mensal</h1>

    <div class="mat-elevation-z8">
      <table class="tabelaMensal" mat-table [dataSource]="dataSourceTabelaMensal">

        <ng-container matColumnDef="mes">
          <th mat-header-cell *matHeaderCellDef> Mês </th>
          <td mat-cell *matCellDef="let element"> {{element.mes}} </td>
        </ng-container>

        <ng-container matColumnDef="creditoAtualizadoMensal">
          <th mat-header-cell *matHeaderCellDef> Crédito Atualizado </th>
          <td mat-cell *matCellDef="let element"> {{element.creditoAtualizadoMensal}} </td>
        </ng-container>

        <ng-container matColumnDef="investimentoMensalCorrigido">
          <th mat-header-cell *matHeaderCellDef> Investimento Mensal Corrigido </th>
          <td mat-cell *matCellDef="let element"> {{element.investimentoMensalCorrigido}} </td>
        </ng-container>

        <ng-container matColumnDef="valorInvestidoCorrigido">
          <th mat-header-cell *matHeaderCellDef> Valor Investido Corrigido </th>
          <td mat-cell *matCellDef="let element"> {{element.valorInvestidoCorrigido}} </td>
        </ng-container>
        
        <ng-container matColumnDef="saldoDevedor">
          <th mat-header-cell *matHeaderCellDef> Saldo Devedor </th>
          <td mat-cell *matCellDef="let element"> {{element.saldoDevedor}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsTabelaMensal"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsTabelaMensal;"></tr>
      </table>

    </div>

   </ng-container> 

</div>

